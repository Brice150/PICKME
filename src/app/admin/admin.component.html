<div class="container">
  <div class="btn-container">
    <a
      (click)="toggleUserOrDeleted('user')"
      [title]="!isUserMode ? 'View Users' : ''"
      [ngClass]="isUserMode ? 'active' : 'unactive'"
    >
      <span class="main">{{ adminStats?.totalUsers }} Users</span>
      <span *ngIf="adminStats && adminStats.totalRecentUsers > 0"
        >(+{{ adminStats.totalRecentUsers }} this week)</span
      >
    </a>
    <a
      (click)="toggleUserOrDeleted('deleted')"
      [title]="isUserMode ? 'View Deleted Users' : ''"
      [ngClass]="!isUserMode ? 'active' : 'unactive'"
    >
      <span class="main">{{ adminStats?.totalDeletedAccounts }} Deleted</span>
      <span *ngIf="adminStats && adminStats.totalRecentDeletedAccounts > 0"
        >(+{{ adminStats.totalRecentDeletedAccounts }} this week)</span
      >
    </a>
  </div>
  <form [formGroup]="adminForm">
    <div class="input-container">
      <span class="title">Email</span>
      <input
        placeholder="Email"
        formControlName="email"
        (focusout)="focusOut(0)"
      />
    </div>
    <div class="input-container">
      <span class="title">Order By</span>
      <select formControlName="orderBy" (change)="search(0)">
        <option value="" selected>Date</option>
        <option value="totalDislikes">Dislikes</option>
        <option value="totalLikes">Likes</option>
        <option value="totalMatches">Matches</option>
      </select>
    </div>
  </form>
  <app-paginator
    #paginator
    *ngIf="searched"
    (handlePageEvent)="handlePageEvent($event)"
    [loading]="loading"
    [usersNumber]="isUserMode ? users.length : deletedAccounts.length"
    [maxPerPage]="5"
  >
  </app-paginator>
  <div
    class="content"
    *ngIf="users && users.length !== 0 && !loading && isUserMode"
  >
    <app-user-card
      *ngFor="let user of users"
      [user]="user"
      (deleteEvent)="deleteUser(user)"
    ></app-user-card>
  </div>
  <div
    class="content"
    *ngIf="
      deletedAccounts && deletedAccounts.length !== 0 && !loading && !isUserMode
    "
  >
    <app-deleted-account-card
      *ngFor="let deletedAccount of deletedAccounts"
      [deletedAccount]="deletedAccount"
    ></app-deleted-account-card>
  </div>
  <div class="content loading" *ngIf="loading">
    <app-loading></app-loading>
  </div>
  <div
    class="content nothing"
    *ngIf="(!users || users.length === 0) && !loading && searched && isUserMode"
  >
    <span>No user</span>
  </div>
  <div
    class="content nothing"
    *ngIf="
      (!deletedAccounts || deletedAccounts.length === 0) &&
      !loading &&
      searched &&
      !isUserMode
    "
  >
    <span>No deleted account</span>
  </div>
</div>
